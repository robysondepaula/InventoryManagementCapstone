@model PurchaseProductViewModels

@{
    ViewData["Title"] = "Index";
}

<h1>Transaction</h1>

<div class="card mt-3">
    <div class="card-header font-weight-bolder d-flex justify-content-center bg-dark text-white"> Transaction</div>
    <div class="card-body row">

        <div class="form-group col-md">
            <div style="padding-top:10px; padding-bottom:10px; ">
                <a asp-action="CreatePurchase" asp-for="Transaction.TransactionTypeId" value="1" class="btn btn-light">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" style="padding-right: 10px; margin-bottom: 10px" fill="currentColor" class="bi bi-cart-plus" viewBox="0 0 16 16">
                    <path d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z" />
                    <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                </svg> Create a New Purchase
                </a>
            </div>
        </div>
        <div class="form-group col-md">
            <div style="padding-top:10px; padding-bottom:10px; ">
                <a asp-action="" class="btn btn-light">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" style="padding-right: 10px; margin-bottom: 10px" fill="currentColor" class="bi bi-bag-plus-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zM8.5 8a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V12a.5.5 0 0 0 1 0v-1.5H10a.5.5 0 0 0 0-1H8.5V8z"></path>
                    </svg> Create a New Product Sale
                </a>
            </div>
        </div>
        <div class="form-group col-md">
            <div style="padding-top:10px; padding-bottom:10px; ">
                <a asp-action="" class="btn btn-light">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" style="padding-right: 10px; margin-bottom: 10px" fill="currentColor" class="bi bi-bag-dash-fill" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zM6 9.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1H6z" />
                    </svg> Create a New Product Loss
                </a>
            </div>
        </div>


        <div class="card mt-3" style="margin-left:40px">
            <div class="card-header font-weight-bolder d-flex justify-content-center bg-dark text-white">
                <h3>Transaction Table </h3>
                <div>
                    <div class="form-group">
                        <label asp-for="Transaction.TransactionTypeId" class="control-label"></label>
                        <select asp-for="Transaction.TransactionTypeId" class="form-control" asp-items="ViewBag.TransactionTypeId"></select>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <table id="myTable" class="table-hover">
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.Transaction.Date)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Transaction.Product.Category.Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Transaction.Product)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Transaction.Quantity)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Transaction.TransactionType.Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Transaction.Supplier.Name)
                            </th>

                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.TransactionsList)
                        {
                            if (item.TransactionTypeId == 1)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Date)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Product.Category.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Product.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Quantity)
                                    </td>

                                    <td>
                                        @Html.DisplayFor(modelItem => item.TransactionType.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Supplier.Name)
                                    </td>
                                    <td>
                                        <a asp-action="Edit" asp-route-id="@item.TransactionId" class="text-info"><img src="~/images/edit.png" alt="..." class="img-responsive img-rounded" style="width:30px"></a> |
                                        <a asp-action="Details" asp-route-id="@item.TransactionId" class="text-success"><img src="~/images/details.png" alt="..." class="img-responsive img-rounded" style="width: 30px"></a> |
                                        <a asp-action="Delete" asp-route-id="@item.TransactionId" class="text-danger"><img src="~/images/delete.png" alt="..." class="img-responsive img-rounded" style="width: 30px"></a>
                                    </td>
                                </tr>
                            }
                            else if (item.TransactionTypeId == 2)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Date)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Product.Category.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Product.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Quantity)
                                    </td>

                                    <td>
                                        @Html.DisplayFor(modelItem => item.TransactionType.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Supplier.Name)
                                    </td>
                                    <td>
                                        <a asp-action="Edit" asp-route-id="@item.TransactionId" class="text-info"><img src="~/images/edit.png" alt="..." class="img-responsive img-rounded" style="width:30px"></a> |
                                        <a asp-action="Details" asp-route-id="@item.TransactionId" class="text-success"><img src="~/images/details.png" alt="..." class="img-responsive img-rounded" style="width: 30px"></a> |
                                        <a asp-action="Delete" asp-route-id="@item.TransactionId" class="text-danger"><img src="~/images/delete.png" alt="..." class="img-responsive img-rounded" style="width: 30px"></a>
                                    </td>
                                </tr>
                            }
                            else
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Date)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Product.Category.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Product.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Quantity)
                                    </td>

                                    <td>
                                        @Html.DisplayFor(modelItem => item.TransactionType.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Supplier.Name)
                                    </td>
                                    <td>
                                        <a asp-action="Edit" asp-route-id="@item.TransactionId" class="text-info"><img src="~/images/edit.png" alt="..." class="img-responsive img-rounded" style="width:30px"></a> |
                                        <a asp-action="Details" asp-route-id="@item.TransactionId" class="text-success"><img src="~/images/details.png" alt="..." class="img-responsive img-rounded" style="width: 30px"></a> |
                                        <a asp-action="Delete" asp-route-id="@item.TransactionId" class="text-danger"><img src="~/images/delete.png" alt="..." class="img-responsive img-rounded" style="width: 30px"></a>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>



@section Scripts {

    <script>
        $(document).ready(function () {
            $('#myTable').DataTable();
        });
    </script>
}
